include _layout
  body#main.wrapper
    include _storeHeader
      | クーポン情報 編集
    form.couponEditor(enctype="multipart/form-data" method="POST")
      .couponEditor_signbord
        .couponEditor_titleArea
          .couponEditor_titleArea-title
            | クーポン情報
        .couponEditor_body
          .labeledRow
            label.labeledRow-header(for="couponTitle")
              | タイトル
            .labeledRow-body
              input#couponTitle(
                name="couponTitle" type="text"
                value="当日OK! 21時以降のご予約で2.5H飲放題付き料理4品で3,600円"
              )
          .labeledRow
            label.labeledRow-header(for="couponImage")
              | イメージ画像
            .labeledRow-body
              input#couponImage(
                name="couponImage" type="file"
                accept="image/*"
              )
              img.labeledRow-body-image(src="./img/dummy.jpg")

          .labeledRow
            label.labeledRow-header(for="couponValidFrom")
              | 有効期限 (利用開始日)
            .labeledRow-body
              input#couponValidFrom(
                name="couponValidFrom" type="date"
                value="2016-04-15"
              )

          .labeledRow
            label.labeledRow-header(for="couponExpire")
              | 有効期限 (利用期限)
            .labeledRow-body
              input#couponExpire(
                name="couponExpire" type="date"
                value="2016-04-30"
              )

          .labeledRow
            label.labeledRow-header(for="couponType")
              | 種別
            .labeledRow-body
              select#couponType(
                name="couponType"
                value=""
              )
                option(value="0")
                  | 購入額から割引
                option(value="1")
                  | 購入者プレゼント
                option(value="2")
                  | 特別セット
                option(value="3")
                  | その他クーポン


          #js-couponDiscount.js-invisible
            .labeledRow
              label.labeledRow-header(for="discountRate")
                | 割引率 (ご購入総額から xx% OFF)
              .labeledRow-body
                input#discountRate(
                  name="discountRate" type="number"
                  min="0" max="100"
                  value="30"
                )
            .labeledRow
              label.labeledRow-header(for="discountMinimumFee")
                | 最低購入額 (xx円以上お買い上げのお客様のみ割引)
              .labeledRow-body
                input#discountMinimumFee(
                  name="discountMinimumFee" type="number"
                  min="0"
                  value="30"
                )
            .labeledRow
              label.labeledRow-header(for="discountOtherConditions")
                | その他のクーポン適用条件
              .labeledRow-body
                textarea#discountOtherConditions(
                   name="discountOtherConditions"
                )

          #js-couponGift.js-invisible
            .labeledRow
              label.labeledRow-header(for="giftContent")
                | プレゼント内容
              .labeledRow-body
                input#giftContent(
                  name="giftContent" type="text"
                  value=""
                )
            .labeledRow
              label.labeledRow-header(for="giftReferencePrice")
                | プレゼント参考価格 (非売品の場合は記入しないでください)
              .labeledRow-body
                input#giftReferencePrice(
                  name="giftReferencePrice" type="number"
                  min="0"
                  value="30"
                )
            .labeledRow
              label.labeledRow-header(for="giftMinimumFee")
                | 最低購入額 (xx円以上お買い上げのお客様にプレゼント)
              .labeledRow-body
                input#giftMinimumFee(
                  name="giftMinimumFee" type="number"
                  min="0"
                  value="30"
                )
            .labeledRow
              label.labeledRow-header(for="giftOtherConditions")
                | その他のクーポン適用条件
              .labeledRow-body
                textarea#giftOtherConditions(
                   name="giftOtherConditions"
                )

          #js-couponSet.js-invisible
            .labeledRow
              label.labeledRow-header(for="setContent")
                | セット内容
              .labeledRow-body
                textarea#setContent(
                  name="setContent"
                )
                  | 2.5時間飲放題付きの料理4品です。
                  | 1. 前菜 2. 焼き肉盛り合わせ 3. 冷麺 4. アイスクリーム
            .labeledRow
              label.labeledRow-header(for="setPrice")
                | セット価格
              .labeledRow-body
                input#setPrice(
                  name="setPrice" type="number"
                  min="0"
                  value="3000"
                )
            .labeledRow
              label.labeledRow-header(for="setReferencePrice")
                | セット参考価格 (非売品の場合は記入しないでください)
              .labeledRow-body
                input#setReferencePrice(
                  name="setReferencePrice" type="number"
                  min="0"
                  value="4000"
                )
            .labeledRow
              label.labeledRow-header(for="setOtherConditions")
                | その他のクーポン適用条件
              .labeledRow-body
                textarea#setOtherConditions(
                   name="setOtherConditions"
                )
                  | ※ 1グループ1回のご利用時の利用枚数制限はありません。
                  | ※ 21時以降のご予約のお客様が対象です。

          #js-couponOther.js-invisible
            .labeledRow
              label.labeledRow-header(for="otherContent")
                | クーポン内容
              .labeledRow-body
                textarea#otherContent(
                  name="otherContent"
                )
            .labeledRow
              label.labeledRow-header(for="otherConditions")
                | クーポン適用条件
              .labeledRow-body
                textarea#otherConditions(
                   name="otherConditions"
                )
                  | ※ 1グループ1回のご利用時の利用枚数制限はありません。
                  | ※ 21時以降のご予約のお客様が対象です。
      .couponSubmit
        button.btn.outerBtn(type="submit")
          | この内容で店舗情報を更新する
    script
      | var showByCouponType = function () {
      |   var selected = document.getElementById("couponType").value;
      |   Array.prototype.slice.call(
      |     document.getElementsByClassName("js-visible") || []
      |   ).forEach(function (elem){
      |     elem.classList.remove("js-visible");
      |     elem.classList.add("js-invisible");
      |   });
      |   var toShow = {
      |     "0": document.getElementById("js-couponDiscount"),
      |     "1": document.getElementById("js-couponGift"),
      |     "2": document.getElementById("js-couponSet"),
      |     "3": document.getElementById("js-couponOther")
      |   }[selected];
      |   toShow.classList.remove("js-invisible");
      |   toShow.classList.add("js-visible");
      | };
      | document.getElementById("couponType").addEventListener("change", showByCouponType, false);
      | showByCouponType();
